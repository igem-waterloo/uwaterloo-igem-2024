name: MATLAB Testing

on: 
  push:
    branches:
      - main
  pull_request:
    types: 
      - opened
      - synchronize
      - reopened
      - closed

jobs:
  matlab-test:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
    - name: Set up MATLAB
      uses: matlab-actions/setup-matlab@v1

    - name: Run MATLAB tests
      run: |
        matlab -batch "cd('tests'); results = runtests('SampleTests.m'); assert(all([results.Passed]), 'Some tests failed');""
